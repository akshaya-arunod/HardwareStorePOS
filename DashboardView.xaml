 <UserControl x:Class="HardwareStore.Views.DashboardView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="White">

    <UserControl.Resources>
        <DropShadowEffect x:Key="CardShadow" BlurRadius="6" ShadowDepth="2" Color="#22000000" />
    </UserControl.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="24" >

            <!-- Greeting -->
            <TextBlock Text="Welcome back, Admin 👋" FontSize="24" FontWeight="Bold" Foreground="#1F2937" Margin="0 0 0 20" />

            <!-- Stat Cards -->
            <UniformGrid Columns="4" Margin="0 0 0 24" HorizontalAlignment="Stretch">
                <!-- Total Sales -->
                <Border Background="White" CornerRadius="10" Padding="20" Margin="8" Effect="{StaticResource CardShadow}">
                    <StackPanel>
                        <TextBlock Text="Total Sales" FontSize="16" FontWeight="SemiBold" Foreground="#374151" />
                        <TextBlock Text="{Binding Stats.TotalSales, StringFormat=Rs. {0:N2}}" FontWeight="Bold" FontSize="28" Foreground="#10B981" Margin="0 4 0 0"/>
                    </StackPanel>
                </Border>

                <!-- Transactions -->
                <Border Background="White" CornerRadius="10" Padding="20" Margin="8" Effect="{StaticResource CardShadow}">
                    <StackPanel>
                        <TextBlock Text="Transactions" FontSize="16" FontWeight="SemiBold" Foreground="#374151" />
                        <TextBlock Text="{Binding Stats.TotalTransactions}" FontWeight="Bold" FontSize="28" Foreground="#3B82F6" Margin="0 4 0 0"/>
                    </StackPanel>
                </Border>

                <!-- Avg. Transaction -->
                <Border Background="White" CornerRadius="10" Padding="20" Margin="8" Effect="{StaticResource CardShadow}">
                    <StackPanel>
                        <TextBlock Text="Avg. Transaction" FontSize="16" FontWeight="SemiBold" Foreground="#374151" />
                        <TextBlock Text="{Binding Stats.AverageTransaction, StringFormat=Rs. {0:N2}}" FontWeight="Bold" FontSize="28" Foreground="#F59E0B" Margin="0 4 0 0"/>
                    </StackPanel>
                </Border>

                <!-- Low Stock Alerts -->
                <Border Background="#FEF2F2" CornerRadius="10" Padding="20" Margin="8" Effect="{StaticResource CardShadow}">
                    <StackPanel>
                        <TextBlock Text="Low Stock Alerts" FontSize="16" FontWeight="SemiBold" Foreground="#B91C1C" />
                        <TextBlock Text="{Binding LowStockItems.Count}" FontWeight="Bold" FontSize="28" Foreground="#B91C1C" Margin="0 4 0 0"/>
                        <TextBlock Text="Needs restocking" FontSize="12" Foreground="#991B1B"/>
                    </StackPanel>
                </Border>
            </UniformGrid>

            <!-- Low Stock Items List -->
            <Border Background="White" CornerRadius="10" Padding="20" Margin="8" Effect="{StaticResource CardShadow}">
                <StackPanel>
                    <TextBlock Text="Low Stock Items" FontWeight="SemiBold" FontSize="20" Foreground="#374151" Margin="0 0 0 16" />

                    <!-- Collapsed List (first 4 items) -->
                    <ItemsControl x:Name="LowStockCollapsedList" ItemsSource="{Binding LowStockItems}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Name}" Foreground="#B91C1C" FontSize="14" Margin="0 4"/>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                    </ItemsControl>

                    <!-- Toggle Button -->
                    <Button x:Name="LowStockToggleButton"
                            Content="View All"
                            Width="100" Height="30"
                            HorizontalAlignment="Right"
                            Margin="0 10 0 0"
                            Background="#E5E7EB"
                            Foreground="#374151"
                            BorderBrush="#D1D5DB"
                            Click="ToggleLowStockView_Click"/>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</UserControl>
